# Day24 notes

## 今日内容

- 并发编程

### 并发编程

#### 1. 操作系统发展史

- 人机矛盾：CPU利用率低
- 磁带存储+批处理：降低数据的读取时间,提高CPU的利用率
- 多道操作系统：在一个任务中遇到IO操作让出CPU
    - 数据隔离概念
    - 时空复用概念
    - 能够在一个任务遇到io操作的时候动把CPU让出来,给其他的任务使用
- 分时操作系统：
    - 短作业优先算法
    - 先来先服务算法
    - 时间分片
        - CPU的轮转:每一个程序分配一个时间片
        - 需要切换,要占用时间
        - 降低了CPU的利用率
        - 提高了用户体验
- 分时+多道操作系统
    - 多个程序一起在计算机中执行
    - 一个程序如果遇到IO操作,切出去让出CPU
    - 一个程序如果没有遇到IO,但是时间片到时了,切出去让出CPU
- 实时操作系统
- 网络操作系统
- 分布式操作系统

#### 2. 进程

##### 1.概念

- 定义：运行中的程序叫做进程
- 程序和进程之间的区别：程序只是一个文件，进程代表这个文件被cpu运行起来的过程
- 进程是计算机中最小的资源分配单位，进程的pid（port id）并不与程序绑定，每次随机分配

- 在操作系统中得唯一标识符是pid

##### 2.进程调度

- 操作系统调度进程的算法
    - 短作业优先
        - 根据来的任务的任务量大小来划分谁先谁后执行。
    - 先来先服务
        - 哪个任务先来，哪个任务先执行，其他需要等待。
    - 时间片轮转
        - 来的每个任务都轮流执行固定N分钟。
    - 多级反馈算法
        - 主要工作机制，设有N个队列（Q1,Q2....QN），其中各个队列对于处理机制的优先级是不一样的，也就是说位于各个队列中的作业(进程)的优先级也是不一样的。
        - 对于N个作业，先来先服务，再来的等待，此时最先来的任务如果进行到规定时间片还没有执行完毕，会被重新放回到下一个队列等待，如果在Q2中此任务还不能完成，再依次放到下一个。
        - 单个队列遵循，先来先服务和时间片轮转原则，队列之间遵循短作业优先，Q1一定比Q2时间片短，且Q1优先级最高，依次类推。即使第QN个有N个人物在等待，第1~N-1个作业中有任意一个还在运行，此N任务中作业就不执行，只有上述全部处理完毕，才执行QN。

##### 3.并行与并发

- 并行
    - 两个程序，两个cpu,每个程序分别占用一个cpu自己执行自己的
    - 看起来是同时执行，实际在每一个时间点上都在各自执行着

- 并发
    - 两个程序，一个cpu，两个程序交替的在一个cpu上执行
    - 看起来是在同时执行，但是实际上仍然是串行

##### 4.同步和异步

- 同步
    - 程序1调用程序2时，程序1停止工作，直到程序2完成后，程序1才继续工作
    - 同步阻塞：调用函数，这个函数并没有完全利用cpu，即存在io操作
    - 同步非阻塞：调用函数，整个运行过程中没有io操作
- 异步
    - 程序1调用程序2时，程序1继续自己的下一个动作，不受程序2的的影响
    - 异步非阻塞：
        - func扔到其他异步任务里执行
        - 本身的任务和func任务各自执行各自的，没有io操作
    - 异步阻塞：\

- 阻塞
    - 阻塞的概念往往伴随着线程。线程一般是指：在调用结果返回前，当前线程会被挂起。调用线程只有在得到结果后才会被唤醒执行后续的操作。
- 非阻塞
    - 阻塞的反向操作，非阻塞的调用是指：在结果没有返回前，该调用不会阻塞住当前的线程

- 阻塞/非阻塞 同步/异步
    - 两者有本质的区别，主要是面向对象的不同
    - 阻塞/非阻塞：进程/线程需要操作的数据如果尚未就绪，是否妨碍了当前进程/线程的后续操作。
    - 同步/异步 ：数据尚未准备就绪，是否等待数据结果。

- 运行的三状态图
    - 就绪、运行、阻塞![进程的三种状态](G:\homework\img\进程的三种状态.png)

